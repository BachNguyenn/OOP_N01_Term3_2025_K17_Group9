# Checking and Fixing the `student` Table

This guide explains how to inspect the existing `student` table and correct the column used for the study year when the application fails with the error:

```
Thêm sinh viên thất bại: could not execute statement [Field 'year' doesn't have a default value]
```

## 1. Inspect the Table Structure

Connect to your MySQL server and run one of the following commands:

```sql
DESCRIBE student;
-- or
SHOW CREATE TABLE student; 
```

Check whether the column storing the study year is named `year` or `study_year` and whether it has `NOT NULL` without a default value.

## 2. Insert Statement

The insert generated by the application includes the column `year`:

```sql
INSERT INTO student (address, code, department, dob, email, gender, name, phone, room_id, year)
VALUES (?,?,?,?,?,?,?,?,?,?);
```

If your table still uses `study_year`, rename the column or adjust the entity mapping accordingly.

## 3. Adjusting the Database

To align with the application code, you can modify the table:

```sql
ALTER TABLE student CHANGE study_year year INT NOT NULL;
```

Alternatively, if you prefer to keep the existing column and avoid mandatory values, allow `NULL` or set a default:

```sql
ALTER TABLE student MODIFY year INT DEFAULT 1;
```

## 4. JPA Mapping

In `Student.java` the field is mapped as:

```java
@NotNull
@Min(1)
@Max(6)
@Column(name = "year")
private Integer year;
```

Ensure this mapping matches the actual column name in your database. After adjusting the table and the code, rebuild the application to resolve the insertion error.
